import { useState } from "react";
import { Card, CardContent } from "../components/ui/Card";
import { Button } from "../components/ui/Button";

const categories = {
  "Жидкости": [
    { name: "Ogo Reels", price: "от 500₽", img: "/img/ogo.png", options: ["Манго", "Арбуз", "Виноград"] },
    { name: "Pound Salt", price: "от 550₽", img: "/img/pound.png", options: ["Яблоко", "Кола", "Лайм"] }
  ],
  "Одноразки": [
    { name: "GeekBar DF 8000", price: "от 700₽", img: "/img/geekbar.png", options: ["Blue Razz Ice", "Strawberry", "Peach"] },
    { name: "Puffmi Tank 16000", price: "от 1200₽", img: "/img/puffmi.png", options: ["Chocolate Popcorn", "Mint", "Berry Mix"] }
  ],
  "Pod-системы": [
    { name: "VooPoo Drag X", price: "от 2500₽", img: "/img/voopoo.png", options: ["Черный", "Синий", "Красный"] },
    { name: "Caliburn G2", price: "от 2300₽", img: "/img/caliburn.png", options: ["Серый", "Фиолетовый", "Золотой"] }
  ]
};

export default function VapeCatalog() {
  const [selectedCategory, setSelectedCategory] = useState(null);
  const [selectedProduct, setSelectedProduct] = useState(null);

  return (
    <div className="relative p-6 max-w-4xl mx-auto">
      <div className="absolute inset-0 flex items-center justify-center opacity-5">
        <img src="/img/csclogo.png" alt="CSC Logo" className="w-3/4" />
      </div>

      <h1 className="relative text-2xl font-bold mb-6 z-10">Каталог CSCshop</h1>

      <div className="relative flex gap-3 mb-6 z-10">
        {Object.keys(categories).map((cat) => (
          <Button
            key={cat}
            variant={selectedCategory === cat ? "default" : "outline"}
            onClick={() => { setSelectedCategory(cat); setSelectedProduct(null); }}
          >
            {cat}
          </Button>
        ))}
      </div>

      <div className="relative z-10">
        {!selectedProduct ? (
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            {selectedCategory &&
              categories[selectedCategory].map((item, i) => (
                <Card key={i} className="rounded-2xl shadow-md cursor-pointer" onClick={() => setSelectedProduct(item)}>
                  <CardContent className="p-4 flex flex-col items-center">
                    <img src={item.img} alt={item.name} className="w-32 h-32 object-contain mb-4" />
                    <h2 className="text-lg font-semibold">{item.name}</h2>
                    <p className="text-gray-600 mb-2">{item.price}</p>
                    <Button>+</Button>
                  </CardContent>
                </Card>
              ))}
          </div>
        ) : (
          <div className="p-4 border rounded-2xl shadow-md bg-white/80 backdrop-blur">
            <Button variant="outline" onClick={() => setSelectedProduct(null)} className="mb-4">← Назад</Button>
            <div className="flex flex-col items-center">
              <img src={selectedProduct.img} alt={selectedProduct.name} className="w-40 h-40 object-contain mb-4" />
              <h2 className="text-xl font-bold mb-2">{selectedProduct.name}</h2>
              <p className="text-gray-600 mb-4">{selectedProduct.price}</p>
              <h3 className="text-lg font-semibold mb-2">Доступные варианты:</h3>
              <ul className="list-disc pl-6 text-gray-700">
                {selectedProduct.options.map((opt, idx) => (
                  <li key={idx}>{opt}</li>
                ))}
              </ul>
            </div>
          </div>
        )}
      </div>
    </div>
  );
}
